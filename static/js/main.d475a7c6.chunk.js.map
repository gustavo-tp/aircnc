{"version":3,"sources":["services/api.js","pages/Login/index.js","pages/Dashboard/index.js","pages/New/index.js","routes.js","App.js","index.js","assets/logo.svg","assets/camera.svg"],"names":["api","axios","create","baseURL","Login","history","useState","email","setEmail","onSubmit","event","a","async","preventDefault","post","response","_id","data","localStorage","setItem","push","htmlFor","id","type","placeholder","value","onChange","target","className","Dashboard","spots","setSpots","requests","setRequests","user_id","getItem","socket","useMemo","socketio","query","useEffect","on","get","headers","loadSpots","map","request","key","user","spot","company","date","onClick","filter","style","backgroundImage","thumbnail_url","price","to","New","thumbnail","setThumbnail","setCompany","techs","setTechs","setPrice","preview","URL","createObjectURL","FormData","append","files","src","camera","alt","Routes","basename","path","exact","component","App","logo","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d475a7c6.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://aircnc-gustavo-tp.herokuapp.com',\n});\n\nexport default api;\n","import React, { useState } from 'react';\nimport api from '../../services/api'\n\nexport default function Login({ history }) {\n  const [email, setEmail] = useState('');\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    const response = await api.post('/sessions', { email });\n\n    const { _id } = response.data;\n\n    localStorage.setItem('user', _id);\n\n    history.push('/dashboard');\n  }\n\n  return (\n    <>\n      <p>\n        Ofereça <strong>spots</strong> para programadores e encontre <strong>talentos</strong> para sua empresa\n      </p>\n\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"email\">E-MAIL *</label>\n        <input\n          id=\"email\"\n          type=\"email\"\n          placeholder=\"Seu melhor e-mail\"\n          value={email}\n          onChange={event => setEmail(event.target.value)}\n        />\n\n        <button className=\"btn\" type=\"submit\">\n          Entrar\n        </button>\n      </form>\n    </>\n  );\n}\n","import React, { useEffect, useState, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport socketio from 'socket.io-client';\nimport api from './../../services/api';\n\nimport './styles.css';\n\nexport default function Dashboard() {\n  const [spots, setSpots] = useState([]);\n  const [requests, setRequests] = useState([]);\n\n  const user_id = localStorage.getItem('user');\n\n  const socket = useMemo(\n    () =>\n      socketio('https://aircnc-gustavo-tp.herokuapp.com', {\n        query: { user_id },\n      }),\n    [user_id]\n  );\n\n  useEffect(() => {\n    socket.on('booking_request', (data) => {\n      setRequests([...requests, data]);\n    });\n  }, [requests, socket]);\n\n  useEffect(() => {\n    async function loadSpots() {\n      const user_id = localStorage.getItem('user');\n      const response = await api.get('/dashboard', {\n        headers: { user_id },\n      });\n\n      setSpots(response.data);\n    }\n\n    loadSpots();\n  }, []);\n\n  async function handleAccept(id) {\n    await api.post(`/bookings/${id}/approvals`);\n\n    setRequests(requests.filter((request) => request._id !== id));\n  }\n\n  async function handleReject(id) {\n    await api.post(`/bookings/${id}/rejections`);\n\n    setRequests(requests.filter((request) => request._id !== id));\n  }\n\n  return (\n    <>\n      <ul className=\"notifications\">\n        {requests.map((request) => (\n          <li key={request._id}>\n            <p>\n              <strong>{request.user.email}</strong> está solicitando uma reserva\n              em <strong>{request.spot.company}</strong> para a data:{' '}\n              <strong>{request.date}</strong>\n            </p>\n            <button\n              className=\"accept\"\n              onClick={() => handleAccept(request._id)}\n            >\n              ACEITAR\n            </button>\n            <button\n              className=\"reject\"\n              onClick={() => handleReject(request._id)}\n            >\n              REJEITAR\n            </button>\n          </li>\n        ))}\n      </ul>\n\n      <ul className=\"spot-list\">\n        {spots.map((spot) => (\n          <li key={spot._id}>\n            <header style={{ backgroundImage: `url(${spot.thumbnail_url})` }} />\n            <strong>{spot.company}</strong>\n            <span>{spot.price ? `R$${spot.price}/dia` : `GRATUITO`}</span>\n          </li>\n        ))}\n      </ul>\n\n      <Link to=\"/new\">\n        <button className=\"btn\">Cadastrar novo spot</button>\n      </Link>\n    </>\n  );\n}\n","import React, { useState, useMemo } from 'react';\nimport api from '../../services/api';\n\nimport camera from '../../assets/camera.svg';\n\nimport './styles.css';\n\nexport default function New({ history }) {\n  const [thumbnail, setThumbnail] = useState(null);\n  const [company, setCompany] = useState('');\n  const [techs, setTechs] = useState('');\n  const [price, setPrice] = useState('');\n\n  const preview = useMemo(() => {\n    return thumbnail ? URL.createObjectURL(thumbnail) : null;\n  }, [thumbnail]);\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    const data = new FormData();\n    const user_id = localStorage.getItem('user');\n\n    data.append('thumbnail', thumbnail);\n    data.append('company', company);\n    data.append('techs', techs);\n    data.append('price', price);\n\n    await api.post('/spots', data, {\n      headers: { user_id }\n    });\n\n    history.push('/dashboard');\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label\n        id=\"thumbnail\"\n        style={{ backgroundImage: `url(${preview})` }}\n        className={thumbnail ? 'has-thumbnail' : ''}\n      >\n        <input\n          type=\"file\"\n          onChange={event => setThumbnail(event.target.files[0])}\n        />\n        <img src={camera} alt=\"Select img\" />\n      </label>\n\n      <label htmlFor=\"company\">EMPRESA *</label>\n      <input\n        id=\"company\"\n        placeholder=\"Sua empresa incrível\"\n        value={company}\n        onChange={event => setCompany(event.target.value)}\n      />\n\n      <label htmlFor=\"techs\">\n        TECNOLOGIAS * <span>(separadas por vírgula)</span>\n      </label>\n      <input\n        id=\"techs\"\n        placeholder=\"Quais tecnologias usam?\"\n        value={techs}\n        onChange={event => setTechs(event.target.value)}\n      />\n\n      <label htmlFor=\"price\">\n        VALOR DA DIÁRIA * <span>(em branco para GRATUITO)</span>\n      </label>\n      <input\n        id=\"price\"\n        placeholder=\"Valor cobrado por dia\"\n        value={price}\n        onChange={event => setPrice(event.target.value)}\n      />\n\n      <button type=\"submit\" className=\"btn\">\n        Cadastrar\n      </button>\n    </form>\n  );\n}\n","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\n\nimport Login from './pages/Login';\nimport Dashboard from './pages/Dashboard';\nimport New from './pages/New';\n\nexport default function Routes() {\n  return (\n    <BrowserRouter basename=\"aircnc\">\n      <Switch>\n        <Route path=\"/\" exact component={Login} />\n        <Route path=\"/dashboard\" component={Dashboard} />\n        <Route path=\"/new\" component={New} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n","import React from 'react';\n\nimport './App.css';\n\nimport logo from './assets/logo.svg';\n\nimport Routes from './routes'\n\nfunction App() {\n  return (\n    <div className=\"container\">\n      <img src={logo} alt=\"AirCnC\" />\n\n      <div className=\"content\">\n        <Routes />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/logo.74052802.svg\";","module.exports = __webpack_public_path__ + \"static/media/camera.6a6f4b6e.svg\";"],"sourceRoot":""}